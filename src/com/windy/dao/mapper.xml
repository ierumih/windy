<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper

PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	<select id = "login" resultType = "user" parameterType = "user">
		select * from user where id = #{id} and pw = #{pw};
	</select>
	<select id = "sel" resultType = "board" parameterType = "Integer">
		select * from #{board_name} order by board_num desc limit #{p1}, 20;
	</select>
	<select id = "sid" resultType = "user" parameterType = "String">
		select * from user where id = #{id};
	</select>
	<select id = "snick" resultType = "user" parameterType = "String">
		select * from user where nick = #{nick};
	</select>
	<select id = "search" resultType = "board" parameterType = "search">
		select * from #{board_name} where ${s_type} like #{s_key} order by board_num desc limit #{p1}, 20;
	</select>
	<select id = "view" resultType = "board" parameterType = "Integer">
		select * from #{board_name} where board_num = #{board_num};
	</select>
	<select id = "writerchk" resultType = "String" parameterType = "board">
		select nick from #{board_name} where board_num = #{board_num};
	</select>
	<select id = "count" resultType = "Integer">
		select count(*) from #{board_name};
	</select>
	<select id = "csearch" resultType = "Integer" parameterType = "search">
		select count(*) from #{board_name} where ${s_type} like #{s_key};
	</select>
	<insert id = "ins" parameterType = "board">
		insert into #{board_name} (nick, board_title,board_content, board_date, board_good, board_view, board_image, board_file) values(#{nick}, #{board_title}, #{board_content}, now(), 0, 0, #{board_image}, #{board_file});
	</insert>
	<insert id = "join" parameterType = "user">
		insert into user (id, pw, name, nick, birth, email, tel, sex, addr, addr1, addr2, addr3, b_have, f_bike, sms) values(#{id}, #{pw}, #{name}, #{nick}, #{birth}, #{email}, #{tel}, #{sex}, #{addr}, #{addr1}, #{addr2}, #{addr3}, #{b_have}, #{f_bike}, #{sms});
	</insert>
	<delete id = "boarddel" parameterType = "board">
		delete from #{board_name} where board_num = #{board_num};
	</delete>
	<update id = "boardupd" parameterType = "board">
		update #{board_name} set board_title = #{board_title}, board_content = #{board_content}, board_file = #{board_file}, board_image = #{board_image} where board_num = #{board_num};
	</update>
	<update id = "boardgoodupd" parameterType = "Integer">
		update #{board_name} set board_good = board_good+1 where board_num = #{board_num};
	</update>
	<update id = "boardviewupd" parameterType = "Integer">
		update #{board_name} set board_view = board_view+1 where board_num = #{board_num};
	</update>
</mapper>